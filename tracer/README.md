# Introduction
This folder contains the code and data used to compute how many bytes are forwarded on global links. It contains the following files and folders:

- `alloc_example/`: Contains examples of job allocation files
- `maps/`: Contains information about the mapping of nodes to network groups (TODO: Check and integrate with MareNostrum5 info)
- `sinfo/`: It contains the data and scripts used to plot the reduction of number of bytes over global links for real job allocations. It contains the following files:
    - `monitor.sh`: Script to monitor the running jobs on a cluster and their allocated hostnames. It uses the `sinfo` command to get the list of running jobs and their allocated hostnames.
    - `leonardo.tar.gz`: Data collected through one week of monitoring of the running jobs on Leonardo. When unzipped, each file is a running job, and each line contains one allocated hostname.
    - `lumi.tar.gz`: Data collected through two weeks of monitoring of the running jobs on LUMI. When unzipped, each file is a running job, and each line contains one allocated hostname.
    - `process.sh`: Processes the data collected in `leonardo.tar.gz` and `lumi.tar.gz` (they must have been unzipped before) to create files with the reduction of number of bytes over global links for each job. Each generated file has two columns: the number of nodes, and the percentage reduction of number of bytes over global links. It is possible to modify the script to change the collective to analyze and/or the algorithms to compare. It relies on the `trace_communications.py` script to compute the reduction of number of bytes over global links.
    - `plot.py`: Script to plot the reduction of number of bytes over global links for each job. It uses the data generated by `process.sh` to create a scatterplot with the number of nodes on the x-axis and the percentage reduction of number of bytes over global links on the y-axis. Each point is a job, and the size of each point represents the number of groups allocated to that specific job. It also plots boxplots showing the percentage reduction over all the jobs.
- `algo_patterns.json`: Defines the patterns of some of the algorithms used in the analysis.
- `trace_communications.py`: Script to compute the reduction of number of bytes over global links for a given job allocation. It takes as input a job allocation file and the mapping of nodes to network groups, and it computes the reduction of number of bytes over global links. You can run this file with `--help` for more information about the arguments.
